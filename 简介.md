# arc test 项目描述

## 1.框架说明

### a.后端
* 框架： express + prisma
* 数据校验： zod + express-zod-validator
* 数据库： sqlite + node-cache

### b.前端
* 框架 react + tailwind + rainbow(wagmi)
* 事件处理

### c.初始化步骤：

* npm install
* npx prisma generate 
* npx prisma migrate dev
* 确认两个env文件 .env + .env.development.local

#### c.1 启动

```
  npm run dev 
```

-----

## 2.业务逻辑

#### 2.1 认证
* 使用 谷歌钱包插件登录（如 metamask等）
* 支持 多账户切换

###### 2.1.2 认证方式
* 钱包授权：使用 钱包签名（signMessage)，登录时传递 data + sign 去recover address。进行校验
  * （更优方案是公私钥的共享密钥，但是由于插件没有开放api）
* token 登录：token = signdata + address ，后端根据address，查询出 sign对应的data，进行recover address 比较

#### 2.2 功能

* 登录页
  * 钱包授权登录
  * token串登录
    * （需要授权登录成功后，获取token串进行登录）

* 主页
  * 部分用户字段展示
  * 资料变更（头像上传）
  * 复制 token 串
  * 退出登录


## 3.改进方向

* localstorage 需要更换其他更安全的storage，比如 可以加密的React secure storage
  * 不同账号的storage不同，用户加密的password也根据账号变更，这样更安全
* 认证机制还可以更安全，比如nonce+签名，或者随机图像的hash + 签名
* 增加多种三方登录方式，账号绑定机制
* 后续可以增加合约交互,比如nft 展示，账单查询等
* 国际化支持 ，如react i18next
* ui 可以继续美化,以及主题颜色（charki-ui theme）
* 多服务可用网关，sqlite可替换